<?php
defined('BASEPATH') OR exit('No direct script access allowed');

class Home extends CI_Controller {
	public function index()
	{
		$this->load->library('migration');

		if ($this->migration->current() === FALSE)
		{
			show_error($this->migration->error_string());
		}
		
		$data['title'] = "Home";

		$data['recommended'] = array(
			array(
				"title" => "Grove And Chew",
				"desc" => "Get your chow on while you grove at these totally rad diners"
			),
			array(
				"title" => "Rainy Days",
				"desc" => "Come in from the rain and warm up with these comforting menus"
			),
			array(
				"title" => "Health is Might",
				"desc" => "No cheaters in here! Treat your body right with this selection of health food restaurants"
			),
			array(
				"title" => "Cheat Day",
				"desc" => "We all need a break sometimes, so come pig out at these delectably unhealthy dives"
			)
		);

		$data['playlists'] = array(
			array(
				"title" => "Out of ideas",
				"desc" => "Coming up with these is really hard..."
			),
			array(
				"title" => "Placeholders",
				"desc" => "I'm just going to start using placeholders"
			),
			array(
				"title" => "Lorem Ipsum",
				"desc" => "Lorem ipsum dolor sit amet, consectetur adipiscing elit"
			),
			array(
				"title" => "Dolor Sit",
				"desc" => "dolor sit amet, consectetur adipiscing elit. Nulla eget condimentum ex"
			)
		);

		$this->load->view('partials/header.php', $data);
		$this->load->view('home.php', $data);
		$this->load->view('partials/footer.php', $data);
	}
	
	public function getRestaurantData($jsonData){
		$srJson = $jsonData;
		if ($jsonData == ""){
			$srJson = '{"meta":{"code":200,"requestId":"5a011b37351e3d3eae5ee4fe"},"notifications":[{"type":"notificationTray","item":{"unreadCount":0}}],"response":{"venues":[{"id":"58fa60c8a35dce24a1fc26cb","name":"Jinya Ramen Bar","contact":{},"location":{"address":"541 Robson St","crossStreet":"at Richards St","lat":49.28021475187463,"lng":-123.11808272960953,"labeledLatLngs":[{"label":"display","lat":49.28021475187463,"lng":-123.11808272960953}],"postalCode":"V6B 2B7","cc":"CA","city":"Vancouver","state":"BC","country":"Canada","formattedAddress":["541 Robson St (at Richards St)","Vancouver BC V6B 2B7"]},"categories":[{"id":"55a59bace4b013909087cb24","name":"Ramen Restaurant","pluralName":"Ramen Restaurants","shortName":"Ramen","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/ramen_","suffix":".png"},"primary":true}],"verified":false,"stats":{"checkinsCount":352,"usersCount":264,"tipCount":3},"allowMenuUrlEdit":true,"beenHere":{"lastCheckinExpiredAt":0},"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"referralId":"v-1510021943","venueChains":[],"hasPerk":false},{"id":"4b6dcfc5f964a52027922ce3","name":"The Famous Warehouse","contact":{"phone":"6046778080","formattedPhone":"(604) 677-8080"},"location":{"address":"989 Granville St.","crossStreet":"at Nelson St.","lat":49.27947300175228,"lng":-123.12271529464233,"labeledLatLngs":[{"label":"display","lat":49.27947300175228,"lng":-123.12271529464233}],"postalCode":"V6B 2C9","cc":"CA","city":"Vancouver","state":"BC","country":"Canada","formattedAddress":["989 Granville St. (at Nelson St.)","Vancouver BC V6B 2C9"]},"categories":[{"id":"4bf58dd8d48988d155941735","name":"Gastropub","pluralName":"Gastropubs","shortName":"Gastropub","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/gastropub_","suffix":".png"},"primary":true}],"verified":false,"stats":{"checkinsCount":5660,"usersCount":2533,"tipCount":65},"url":"http:\/\/thefamouswarehouse.com","hasMenu":true,"menu":{"type":"Menu","label":"Menu","anchor":"View Menu","url":"https:\/\/foursquare.com\/v\/the-famous-warehouse\/4b6dcfc5f964a52027922ce3\/menu","mobileUrl":"https:\/\/foursquare.com\/v\/4b6dcfc5f964a52027922ce3\/device_menu"},"allowMenuUrlEdit":true,"beenHere":{"lastCheckinExpiredAt":0},"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"referralId":"v-1510021943","venueChains":[],"hasPerk":false},{"id":"4aa7dce2f964a520ad4d20e3","name":"Medina Café","contact":{"phone":"6048793114","formattedPhone":"(604) 879-3114","twitter":"cafemedina","instagram":"medinacafe","facebook":"213462508685032","facebookUsername":"medinacafe","facebookName":"Medina Cafe"},"location":{"address":"780 Richards St","crossStreet":"btwn W Georgia & Robson","lat":49.28056540642322,"lng":-123.11685919761656,"labeledLatLngs":[{"label":"display","lat":49.28056540642322,"lng":-123.11685919761656}],"postalCode":"V6B 2L3","cc":"CA","city":"Vancouver","state":"BC","country":"Canada","formattedAddress":["780 Richards St (btwn W Georgia & Robson)","Vancouver BC V6B 2L3"]},"categories":[{"id":"4bf58dd8d48988d143941735","name":"Breakfast Spot","pluralName":"Breakfast Spots","shortName":"Breakfast","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/breakfast_","suffix":".png"},"primary":true}],"verified":true,"stats":{"checkinsCount":7436,"usersCount":4865,"tipCount":248},"url":"http:\/\/www.medinacafe.com","hasMenu":true,"menu":{"type":"Menu","label":"Menu","anchor":"View Menu","url":"https:\/\/foursquare.com\/v\/medina-caf%C3%A9\/4aa7dce2f964a520ad4d20e3\/menu","mobileUrl":"https:\/\/foursquare.com\/v\/4aa7dce2f964a520ad4d20e3\/device_menu"},"allowMenuUrlEdit":true,"beenHere":{"lastCheckinExpiredAt":0},"specials":{"count":0,"items":[]},"venuePage":{"id":"88939542"},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"referralId":"v-1510021943","venueChains":[],"hasPerk":false},{"id":"4aa8005bf964a520a24e20e3","name":"Chambar","contact":{"phone":"6048797119","formattedPhone":"(604) 879-7119","twitter":"chambar","facebook":"370207029855472","facebookUsername":"chambarrestaurant","facebookName":"Chambar Restaurant"},"location":{"address":"568 Beatty St","crossStreet":"btwn W Pender & Dunsmuir","lat":49.279925416078164,"lng":-123.1100781115385,"labeledLatLngs":[{"label":"display","lat":49.279925416078164,"lng":-123.1100781115385}],"postalCode":"V6B 2L3","cc":"CA","city":"Vancouver","state":"BC","country":"Canada","formattedAddress":["568 Beatty St (btwn W Pender & Dunsmuir)","Vancouver BC V6B 2L3"]},"categories":[{"id":"52e81612bcbc57f1066b7a02","name":"Belgian Restaurant","pluralName":"Belgian Restaurants","shortName":"Belgian","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/default_","suffix":".png"},"primary":true}],"verified":true,"stats":{"checkinsCount":4966,"usersCount":3136,"tipCount":102},"url":"http:\/\/www.chambar.com","hasMenu":true,"menu":{"type":"Menu","label":"Menu","anchor":"View Menu","url":"https:\/\/foursquare.com\/v\/chambar\/4aa8005bf964a520a24e20e3\/menu","mobileUrl":"https:\/\/foursquare.com\/v\/4aa8005bf964a520a24e20e3\/device_menu"},"allowMenuUrlEdit":true,"beenHere":{"lastCheckinExpiredAt":0},"specials":{"count":0,"items":[]},"venuePage":{"id":"49016298"},"storeId":"","hereNow":{"count":0,"summary":"Nobody here","groups":[]},"referralId":"v-1510021943","venueChains":[],"hasPerk":false},{"id":"4aa73d25f964a520704c20e3","name":"Whole Foods Market","contact":{"phone":"7783704210","formattedPhone":"(778) 370-4210","twitter":"wfmvan","facebook":"248990265276540","facebookName":"Forte Whole Foods"},"location":{"address":"510 West 8th Avenue","crossStreet":"at Cambie St","lat":49.26398649385371,"lng":-123.1152641312828,"labeledLatLngs":[{"label":"display","lat":49.26398649385371,"lng":-123.1152641312828}],"postalCode":"V5Z 1C5","cc":"CA","neighborhood":"Fairview","city":"Vancouver","state":"BC","country":"Canada","formattedAddress":["510 West 8th Avenue (at Cambie St)","Vancouver BC V5Z 1C5"]},"categories":[{"id":"4bf58dd8d48988d118951735","name":"Grocery Store","pluralName":"Grocery Stores","shortName":"Grocery Store","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/shops\/food_grocery_","suffix":".png"},"primary":true}],"verified":true,"stats":{"checkinsCount":16452,"usersCount":3163,"tipCount":84},"url":"http:\/\/www.wholefoodsmarket.com\/stores\/cambie","allowMenuUrlEdit":true,"beenHere":{"lastCheckinExpiredAt":0},"specials":{"count":0,"items":[]},"storeId":"CMB","hereNow":{"count":0,"summary":"Nobody here","groups":[]},"referralId":"v-1510021943","venueChains":[{"id":"556cdf5baceaff43eb042df6"}],"hasPerk":false},{"id":"4aa7f561f964a520384e20e3","name":"Miku Restaurant","contact":{"phone":"6045683900","formattedPhone":"(604) 568-3900","twitter":"MikuRestaurant"},"location":{"address":"200 Granville Street","crossStreet":"West Cordova Street","lat":49.28740961294592,"lng":-123.11283370440117,"labeledLatLngs":[{"label":"display","lat":49.28740961294592,"lng":-123.11283370440117}],"postalCode":"V6E 2E9","cc":"CA","city":"Vancouver","state":"BC","country":"Canada","formattedAddress":["200 Granville Street (West Cordova Street)","Vancouver BC V6E 2E9"]},"categories":[{"id":"4bf58dd8d48988d111941735","name":"Japanese Restaurant","pluralName":"Japanese Restaurants","shortName":"Japanese","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/japanese_","suffix":".png"},"primary":true}],"verified":false,"stats":{"checkinsCount":4804,"usersCount":3199,"tipCount":151},"url":"http:\/\/www.mikurestaurant.com","allowMenuUrlEdit":true,"beenHere":{"lastCheckinExpiredAt":0},"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"referralId":"v-1510021943","venueChains":[],"hasPerk":false},{"id":"4aa87183f964a520525120e3","name":"Urban Fare","contact":{"phone":"6049757550","formattedPhone":"(604) 975-7550"},"location":{"address":"177 Davie St","crossStreet":"at Pacific Blvd","lat":49.2735417490521,"lng":-123.12063677833439,"labeledLatLngs":[{"label":"display","lat":49.2735417490521,"lng":-123.12063677833439}],"postalCode":"V5Z 2Y1","cc":"CA","city":"Vancouver","state":"BC","country":"Canada","formattedAddress":["177 Davie St (at Pacific Blvd)","Vancouver BC V5Z 2Y1"]},"categories":[{"id":"4bf58dd8d48988d118951735","name":"Grocery Store","pluralName":"Grocery Stores","shortName":"Grocery Store","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/shops\/food_grocery_","suffix":".png"},"primary":true}],"verified":true,"stats":{"checkinsCount":6847,"usersCount":1766,"tipCount":46},"url":"http:\/\/www.urbanfare.com","allowMenuUrlEdit":true,"beenHere":{"lastCheckinExpiredAt":0},"specials":{"count":0,"items":[]},"hereNow":{"count":1,"summary":"One other person is here","groups":[{"type":"others","name":"Other people here","count":1,"items":[]}]},"referralId":"v-1510021943","venueChains":[{"id":"556e5da8bd6a82902e29a1b2"}],"hasPerk":false},{"id":"4aac054cf964a520b05b20e3","name":"Whole Foods Market","contact":{"phone":"6046780500","formattedPhone":"(604) 678-0500","twitter":"wfmvan","facebook":"103703011927","facebookUsername":"wfmvan","facebookName":"Whole Foods Market Vancouver"},"location":{"address":"925 Main St","crossStreet":"at Park Royal","lat":49.32577772789828,"lng":-123.14252335833648,"labeledLatLngs":[{"label":"display","lat":49.32577772789828,"lng":-123.14252335833648}],"postalCode":"V7T 2Z3","cc":"CA","city":"West Vancouver","state":"BC","country":"Canada","formattedAddress":["925 Main St (at Park Royal)","West Vancouver BC V7T 2Z3"]},"categories":[{"id":"4bf58dd8d48988d118951735","name":"Grocery Store","pluralName":"Grocery Stores","shortName":"Grocery Store","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/shops\/food_grocery_","suffix":".png"},"primary":true}],"verified":true,"stats":{"checkinsCount":4854,"usersCount":1361,"tipCount":35},"url":"http:\/\/www.wholefoodsmarket.com\/stores\/westvancouver","allowMenuUrlEdit":true,"beenHere":{"lastCheckinExpiredAt":0},"specials":{"count":0,"items":[]},"storeId":"PRV","hereNow":{"count":0,"summary":"Nobody here","groups":[]},"referralId":"v-1510021943","venueChains":[{"id":"556cdf5baceaff43eb042df6"}],"hasPerk":false},{"id":"4b425a9af964a52035d225e3","name":"McDonalds","contact":{"phone":"6047181075","formattedPhone":"(604) 718-1075","twitter":"mcd_canada"},"location":{"address":"1527 Main St","crossStreet":"at Terminal Ave","lat":49.27187866797963,"lng":-123.10055429395864,"labeledLatLngs":[{"label":"display","lat":49.27187866797963,"lng":-123.10055429395864}],"postalCode":"V6A 2W5","cc":"CA","city":"Vancouver","state":"BC","country":"Canada","formattedAddress":["1527 Main St (at Terminal Ave)","Vancouver BC V6A 2W5"]},"categories":[{"id":"4bf58dd8d48988d16e941735","name":"Fast Food Restaurant","pluralName":"Fast Food Restaurants","shortName":"Fast Food","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/fastfood_","suffix":".png"},"primary":true}],"verified":false,"stats":{"checkinsCount":3564,"usersCount":1375,"tipCount":17},"url":"http:\/\/www.mcdonalds.ca","allowMenuUrlEdit":true,"beenHere":{"lastCheckinExpiredAt":0},"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"referralId":"v-1510021943","venueChains":[{"id":"556f7a12bd6a75a9903bddb2"}],"hasPerk":false},{"id":"508c2d32e4b032d8be856a72","name":"Craft Beer Market","contact":{"phone":"6047092337","formattedPhone":"(604) 709-2337","twitter":"craftbeeryvr"},"location":{"address":"85 W 1st Ave.","crossStreet":"btwn Manitoba & Salt","lat":49.27068736614234,"lng":-123.10638324592814,"labeledLatLngs":[{"label":"display","lat":49.27068736614234,"lng":-123.10638324592814}],"postalCode":"V5Y 0C4","cc":"CA","city":"Vancouver","state":"BC","country":"Canada","formattedAddress":["85 W 1st Ave. (btwn Manitoba & Salt)","Vancouver BC V5Y 0C4"]},"categories":[{"id":"4bf58dd8d48988d155941735","name":"Gastropub","pluralName":"Gastropubs","shortName":"Gastropub","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/gastropub_","suffix":".png"},"primary":true}],"verified":false,"stats":{"checkinsCount":5890,"usersCount":2925,"tipCount":74},"url":"http:\/\/www.craftbeermarket.ca","allowMenuUrlEdit":true,"beenHere":{"lastCheckinExpiredAt":0},"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"referralId":"v-1510021943","venueChains":[],"hasPerk":false},{"id":"52e19f99498ee190912a3ff0","name":"PappaRoti","contact":{"phone":"6043662867","formattedPhone":"(604) 366-2867","twitter":"papparoticanada","instagram":"papparoticanada","facebook":"217453971757924","facebookUsername":"papparoticanada","facebookName":"PappaRoti Canada"},"location":{"address":"1505 Robson St","crossStreet":"at Nicola St","lat":49.28871601430035,"lng":-123.13091598247156,"labeledLatLngs":[{"label":"display","lat":49.28871601430035,"lng":-123.13091598247156}],"postalCode":"V6G 1C3","cc":"CA","city":"Vancouver","state":"BC","country":"Canada","formattedAddress":["1505 Robson St (at Nicola St)","Vancouver BC V6G 1C3"]},"categories":[{"id":"4bf58dd8d48988d1e0931735","name":"Coffee Shop","pluralName":"Coffee Shops","shortName":"Coffee Shop","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/coffeeshop_","suffix":".png"},"primary":true}],"verified":true,"stats":{"checkinsCount":1251,"usersCount":704,"tipCount":30},"url":"http:\/\/papparoti.ca","allowMenuUrlEdit":true,"beenHere":{"lastCheckinExpiredAt":0},"specials":{"count":0,"items":[]},"venuePage":{"id":"407189224"},"storeId":"","hereNow":{"count":0,"summary":"Nobody here","groups":[]},"referralId":"v-1510021943","venueChains":[],"hasPerk":false},{"id":"4fb6cb56e4b04335c6dfbe0a","name":"49th Parallel & Luckys Doughnuts","contact":{"phone":"6048724901","formattedPhone":"(604) 872-4901","twitter":"49thparallel","instagram":"49th","facebook":"204869672907826","facebookUsername":"49thParallelRoasters","facebookName":"49th Parallel Roasters"},"location":{"address":"2902 Main St","crossStreet":"at E 13th Ave","lat":49.259128320447275,"lng":-123.1009434023396,"labeledLatLngs":[{"label":"display","lat":49.259128320447275,"lng":-123.1009434023396}],"postalCode":"V5T 3G3","cc":"CA","city":"Vancouver","state":"BC","country":"Canada","formattedAddress":["2902 Main St (at E 13th Ave)","Vancouver BC V5T 3G3"]},"categories":[{"id":"4bf58dd8d48988d1e0931735","name":"Coffee Shop","pluralName":"Coffee Shops","shortName":"Coffee Shop","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/coffeeshop_","suffix":".png"},"primary":true}],"verified":false,"stats":{"checkinsCount":7694,"usersCount":2555,"tipCount":124},"url":"http:\/\/49thcoffee.com","allowMenuUrlEdit":true,"beenHere":{"lastCheckinExpiredAt":0},"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"referralId":"v-1510021943","venueChains":[],"hasPerk":false},{"id":"52f3fa78498e7fdade825f16","name":"Breka Bakery & Cafe","contact":{"phone":"6044288080","formattedPhone":"(604) 428-8080"},"location":{"address":"855 Davie St","crossStreet":"at Hornby St","lat":49.27849567034125,"lng":-123.1280624099068,"labeledLatLngs":[{"label":"display","lat":49.27849567034125,"lng":-123.1280624099068}],"cc":"CA","city":"Vancouver","state":"BC","country":"Canada","formattedAddress":["855 Davie St (at Hornby St)","Vancouver BC"]},"categories":[{"id":"4bf58dd8d48988d16a941735","name":"Bakery","pluralName":"Bakeries","shortName":"Bakery","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/bakery_","suffix":".png"},"primary":true}],"verified":false,"stats":{"checkinsCount":1601,"usersCount":718,"tipCount":32},"url":"http:\/\/breka.ca","allowMenuUrlEdit":true,"beenHere":{"lastCheckinExpiredAt":0},"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"referralId":"v-1510021943","venueChains":[],"hasPerk":false},{"id":"4abd4fedf964a520aa8920e3","name":"Safeway","contact":{"phone":"6042056922","formattedPhone":"(604) 205-6922","twitter":"safewaycanada"},"location":{"address":"4440 Hastings St","crossStreet":"at Willingdon St","lat":49.2807902306828,"lng":-123.00472368324085,"labeledLatLngs":[{"label":"display","lat":49.2807902306828,"lng":-123.00472368324085}],"postalCode":"V5C 2K1","cc":"CA","city":"Burnaby","state":"BC","country":"Canada","formattedAddress":["4440 Hastings St (at Willingdon St)","Burnaby BC V5C 2K1"]},"categories":[{"id":"52f2ab2ebcbc57f1066b8b46","name":"Supermarket","pluralName":"Supermarkets","shortName":"Supermarket","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/shops\/food_grocery_","suffix":".png"},"primary":true}],"verified":false,"stats":{"checkinsCount":2748,"usersCount":582,"tipCount":3},"url":"http:\/\/www.safeway.ca","allowMenuUrlEdit":true,"beenHere":{"lastCheckinExpiredAt":0},"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"referralId":"v-1510021943","venueChains":[{"id":"556d1eaeaceaff43eb0aea65"}],"hasPerk":false},{"id":"4a8e329bf964a520321220e3","name":"Marketplace IGA","contact":{"phone":"6046845714","formattedPhone":"(604) 684-5714"},"location":{"address":"489 Robson St.","crossStreet":"at Richards St","lat":49.28025727631741,"lng":-123.11759052027466,"labeledLatLngs":[{"label":"display","lat":49.28025727631741,"lng":-123.11759052027466}],"postalCode":"V6B 6L9","cc":"CA","city":"Vancouver","state":"BC","country":"Canada","formattedAddress":["489 Robson St. (at Richards St)","Vancouver BC V6B 6L9"]},"categories":[{"id":"52f2ab2ebcbc57f1066b8b46","name":"Supermarket","pluralName":"Supermarkets","shortName":"Supermarket","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/shops\/food_grocery_","suffix":".png"},"primary":true}],"verified":false,"stats":{"checkinsCount":4512,"usersCount":985,"tipCount":11},"url":"http:\/\/www.marketplaceiga.com","allowMenuUrlEdit":true,"beenHere":{"lastCheckinExpiredAt":0},"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"referralId":"v-1510021943","venueChains":[],"hasPerk":false},{"id":"4aa84d2ff964a520b65020e3","name":"T&T Supermarket","contact":{"phone":"6048998836","formattedPhone":"(604) 899-8836"},"location":{"address":"179 Keefer Pl","crossStreet":"at Abbott St","lat":49.27990675657744,"lng":-123.10799176680003,"labeledLatLngs":[{"label":"display","lat":49.27990675657744,"lng":-123.10799176680003}],"postalCode":"V6B 0J1","cc":"CA","city":"Vancouver","state":"BC","country":"Canada","formattedAddress":["179 Keefer Pl (at Abbott St)","Vancouver BC V6B 0J1"]},"categories":[{"id":"4bf58dd8d48988d118951735","name":"Grocery Store","pluralName":"Grocery Stores","shortName":"Grocery Store","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/shops\/food_grocery_","suffix":".png"},"primary":true}],"verified":false,"stats":{"checkinsCount":7522,"usersCount":1961,"tipCount":31},"url":"http:\/\/www.tnt-supermarket.com","allowMenuUrlEdit":true,"beenHere":{"lastCheckinExpiredAt":0},"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"referralId":"v-1510021943","venueChains":[],"hasPerk":false},{"id":"4ab59f7cf964a520a97520e3","name":"Joe Fortes Seafood & Chop House","contact":{"phone":"6046691940","formattedPhone":"(604) 669-1940","twitter":"joefortesvan"},"location":{"address":"777 Thurlow St","crossStreet":"Robson St","lat":49.28501742069146,"lng":-123.12440986218266,"labeledLatLngs":[{"label":"display","lat":49.28501742069146,"lng":-123.12440986218266}],"postalCode":"V6E 3V5","cc":"CA","city":"Vancouver","state":"BC","country":"Canada","formattedAddress":["777 Thurlow St (Robson St)","Vancouver BC V6E 3V5"]},"categories":[{"id":"4bf58dd8d48988d1ce941735","name":"Seafood Restaurant","pluralName":"Seafood Restaurants","shortName":"Seafood","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/seafood_","suffix":".png"},"primary":true}],"verified":false,"stats":{"checkinsCount":5586,"usersCount":3705,"tipCount":105},"url":"http:\/\/www.joefortes.ca","hasMenu":true,"menu":{"type":"Menu","label":"Menu","anchor":"View Menu","url":"https:\/\/foursquare.com\/v\/joe-fortes-seafood--chop-house\/4ab59f7cf964a520a97520e3\/menu","mobileUrl":"https:\/\/foursquare.com\/v\/4ab59f7cf964a520a97520e3\/device_menu"},"allowMenuUrlEdit":true,"beenHere":{"lastCheckinExpiredAt":0},"specials":{"count":0,"items":[]},"hereNow":{"count":1,"summary":"One other person is here","groups":[{"type":"others","name":"Other people here","count":1,"items":[]}]},"referralId":"v-1510021943","venueChains":[],"hasPerk":false},{"id":"4f5e3527771636118a532177","name":"The Pint Public House","contact":{"phone":"6046840258","formattedPhone":"(604) 684-0258","twitter":"pintvancouver","facebook":"193644887376716","facebookUsername":"ThePintVancouver","facebookName":"The Pint Vancouver"},"location":{"address":"455 Abbott St","crossStreet":"at W Pender St","lat":49.28123653712583,"lng":-123.10762256707588,"labeledLatLngs":[{"label":"display","lat":49.28123653712583,"lng":-123.10762256707588}],"postalCode":"V6B 1S4","cc":"CA","city":"Vancouver","state":"BC","country":"Canada","formattedAddress":["455 Abbott St (at W Pender St)","Vancouver BC V6B 1S4"]},"categories":[{"id":"4bf58dd8d48988d11b941735","name":"Pub","pluralName":"Pubs","shortName":"Pub","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/nightlife\/pub_","suffix":".png"},"primary":true}],"verified":true,"stats":{"checkinsCount":5644,"usersCount":2416,"tipCount":33},"url":"http:\/\/www.thepint.ca","hasMenu":true,"menu":{"type":"Menu","label":"Menu","anchor":"View Menu","url":"https:\/\/foursquare.com\/v\/the-pint-public-house\/4f5e3527771636118a532177\/menu","mobileUrl":"https:\/\/foursquare.com\/v\/4f5e3527771636118a532177\/device_menu"},"allowMenuUrlEdit":true,"beenHere":{"lastCheckinExpiredAt":0},"specials":{"count":0,"items":[]},"venuePage":{"id":"38348046"},"storeId":"","hereNow":{"count":0,"summary":"Nobody here","groups":[]},"referralId":"v-1510021943","venueChains":[],"hasPerk":false},{"id":"546cfab4498e31fa52b38545","name":"Small Victory Bakery","contact":{"phone":"6048998892","formattedPhone":"(604) 899-8892","twitter":"sv_bakery","facebook":"839307682765709","facebookUsername":"smallvictorybakery","facebookName":"Small Victory Bakery"},"location":{"address":"1088 Homer St","crossStreet":"btwn Helmcken & Nelson","lat":49.27651218171028,"lng":-123.12133631376243,"labeledLatLngs":[{"label":"display","lat":49.27651218171028,"lng":-123.12133631376243}],"cc":"CA","city":"Vancouver","state":"BC","country":"Canada","formattedAddress":["1088 Homer St (btwn Helmcken & Nelson)","Vancouver BC"]},"categories":[{"id":"4bf58dd8d48988d16a941735","name":"Bakery","pluralName":"Bakeries","shortName":"Bakery","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/bakery_","suffix":".png"},"primary":true}],"verified":false,"stats":{"checkinsCount":1851,"usersCount":643,"tipCount":37},"url":"http:\/\/smallvictory.ca","allowMenuUrlEdit":true,"beenHere":{"lastCheckinExpiredAt":0},"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"referralId":"v-1510021943","venueChains":[],"hasPerk":false},{"id":"510b1603e4b0607cda141579","name":"Breka Bakery & Café","contact":{"phone":"6046208200","formattedPhone":"(604) 620-8200","facebook":"131036776072","facebookName":"Breka Bakery & Cafe"},"location":{"address":"818 Bute St","crossStreet":"at Robson St","lat":49.28585411445341,"lng":-123.12715644115154,"labeledLatLngs":[{"label":"display","lat":49.28585411445341,"lng":-123.12715644115154}],"cc":"CA","city":"Vancouver","state":"BC","country":"Canada","formattedAddress":["818 Bute St (at Robson St)","Vancouver BC"]},"categories":[{"id":"4bf58dd8d48988d16a941735","name":"Bakery","pluralName":"Bakeries","shortName":"Bakery","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/bakery_","suffix":".png"},"primary":true}],"verified":false,"stats":{"checkinsCount":2706,"usersCount":1320,"tipCount":37},"url":"http:\/\/www.breka.ca","allowMenuUrlEdit":true,"beenHere":{"lastCheckinExpiredAt":0},"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"referralId":"v-1510021943","venueChains":[],"hasPerk":false},{"id":"4be1c52ba145c928ea844e80","name":"Metropolis at Metrotown Food Court","contact":{"phone":"6044384715","formattedPhone":"(604) 438-4715","twitter":"metropolisatmet"},"location":{"address":"4700 Kingsway","crossStreet":"Nelson","lat":49.225639725107555,"lng":-122.99728749816894,"labeledLatLngs":[{"label":"display","lat":49.225639725107555,"lng":-122.99728749816894}],"postalCode":"V5H 4N2","cc":"CA","city":"Burnaby","state":"BC","country":"Canada","formattedAddress":["4700 Kingsway (Nelson)","Burnaby BC V5H 4N2"]},"categories":[{"id":"4bf58dd8d48988d120951735","name":"Food Court","pluralName":"Food Courts","shortName":"Food Court","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/shops\/food_foodcourt_","suffix":".png"},"primary":true}],"verified":true,"stats":{"checkinsCount":8521,"usersCount":3250,"tipCount":33},"url":"http:\/\/www.metropolisatmetrotown.com","allowMenuUrlEdit":true,"beenHere":{"lastCheckinExpiredAt":0},"specials":{"count":0,"items":[]},"venuePage":{"id":"33944831"},"storeId":"","hereNow":{"count":0,"summary":"Nobody here","groups":[]},"referralId":"v-1510021943","venueChains":[],"hasPerk":false},{"id":"4d320c5498336dcb18401ff0","name":"Cactus Club Cafe","contact":{"phone":"6046207410","formattedPhone":"(604) 620-7410","twitter":"cactusclubcafe","facebook":"68611420170","facebookUsername":"cactusclubcafe","facebookName":"Cactus Club Cafe"},"location":{"address":"1085 Canada Place","lat":49.289467666655824,"lng":-123.11767144873328,"labeledLatLngs":[{"label":"display","lat":49.289467666655824,"lng":-123.11767144873328}],"postalCode":"V6C 0C3","cc":"CA","city":"Vancouver","state":"BC","country":"Canada","formattedAddress":["1085 Canada Place","Vancouver BC V6C 0C3"]},"categories":[{"id":"4bf58dd8d48988d14e941735","name":"American Restaurant","pluralName":"American Restaurants","shortName":"American","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/default_","suffix":".png"},"primary":true}],"verified":true,"stats":{"checkinsCount":6022,"usersCount":4041,"tipCount":75},"url":"http:\/\/www.facebook.com\/cactusclubcafe","allowMenuUrlEdit":true,"beenHere":{"lastCheckinExpiredAt":0},"specials":{"count":0,"items":[]},"storeId":"","hereNow":{"count":0,"summary":"Nobody here","groups":[]},"referralId":"v-1510021943","venueChains":[{"id":"5569eecda7c8896abe7bd355"}],"hasPerk":false},{"id":"4aa7f646f964a5203d4e20e3","name":"Granville Island Public Market","contact":{"phone":"6046666477","formattedPhone":"(604) 666-6477","twitter":"granville_isle"},"location":{"address":"1661 Duranleau St","crossStreet":"at Johnston St","lat":49.27248788116003,"lng":-123.13528060913086,"labeledLatLngs":[{"label":"display","lat":49.27248788116003,"lng":-123.13528060913086}],"postalCode":"V6H 3S4","cc":"CA","city":"Vancouver","state":"BC","country":"Canada","formattedAddress":["1661 Duranleau St (at Johnston St)","Vancouver BC V6H 3S4"]},"categories":[{"id":"50be8ee891d4fa8dcc7199a7","name":"Market","pluralName":"Markets","shortName":"Market","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/shops\/market_","suffix":".png"},"primary":true}],"verified":true,"stats":{"checkinsCount":24631,"usersCount":14115,"tipCount":192},"url":"http:\/\/granvilleisland.com\/public-market","allowMenuUrlEdit":true,"beenHere":{"lastCheckinExpiredAt":0},"specials":{"count":0,"items":[]},"hereNow":{"count":1,"summary":"One other person is here","groups":[{"type":"others","name":"Other people here","count":1,"items":[]}]},"referralId":"v-1510021943","venueChains":[],"hasPerk":false},{"id":"5261ea7111d2cc4cf26712e3","name":"Cartems Donuterie","contact":{"phone":"7787080996","formattedPhone":"(778) 708-0996","twitter":"cartemsdonuts"},"location":{"address":"534 W Pender St","crossStreet":"at Seymour St","lat":49.283833446719726,"lng":-123.1135544398471,"labeledLatLngs":[{"label":"display","lat":49.283833446719726,"lng":-123.1135544398471}],"postalCode":"V6B 1V3","cc":"CA","city":"Vancouver","state":"BC","country":"Canada","formattedAddress":["534 W Pender St (at Seymour St)","Vancouver BC V6B 1V3"]},"categories":[{"id":"4bf58dd8d48988d148941735","name":"Donut Shop","pluralName":"Donut Shops","shortName":"Donuts","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/donuts_","suffix":".png"},"primary":true}],"verified":false,"stats":{"checkinsCount":2307,"usersCount":1330,"tipCount":72},"url":"http:\/\/cartems.com","allowMenuUrlEdit":true,"beenHere":{"lastCheckinExpiredAt":0},"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"referralId":"v-1510021943","venueChains":[],"hasPerk":false},{"id":"5827c3091dbf6c7dd8ddfd6c","name":"Nemesis Coffee","contact":{"instagram":"nemesis.coffee"},"location":{"address":"302 W Hastings","crossStreet":"Hamilton","lat":49.2827579750819,"lng":-123.11011058102767,"labeledLatLngs":[{"label":"display","lat":49.2827579750819,"lng":-123.11011058102767}],"cc":"CA","city":"Vancouver","state":"BC","country":"Canada","formattedAddress":["302 W Hastings (Hamilton)","Vancouver BC"]},"categories":[{"id":"4bf58dd8d48988d1e0931735","name":"Coffee Shop","pluralName":"Coffee Shops","shortName":"Coffee Shop","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/coffeeshop_","suffix":".png"},"primary":true}],"verified":false,"stats":{"checkinsCount":883,"usersCount":215,"tipCount":16},"url":"http:\/\/www.nemesis.coffee","allowMenuUrlEdit":true,"beenHere":{"lastCheckinExpiredAt":0},"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"referralId":"v-1510021943","venueChains":[],"hasPerk":false},{"id":"50c9369de4b0e4eafac99a81","name":"Chipotle Mexican Grill","contact":{"phone":"6046836394","formattedPhone":"(604) 683-6394","twitter":"chipotletweets","facebook":"124149619252","facebookName":"Chipotle Mexican Grill"},"location":{"address":"818 Howe St","crossStreet":"btwn Robson & Smithe","lat":49.2818177301901,"lng":-123.12153463876159,"labeledLatLngs":[{"label":"display","lat":49.2818177301901,"lng":-123.12153463876159}],"postalCode":"V6Z 1N4","cc":"CA","city":"Vancouver","state":"BC","country":"Canada","formattedAddress":["818 Howe St (btwn Robson & Smithe)","Vancouver BC V6Z 1N4"]},"categories":[{"id":"4bf58dd8d48988d1c1941735","name":"Mexican Restaurant","pluralName":"Mexican Restaurants","shortName":"Mexican","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/mexican_","suffix":".png"},"primary":true}],"verified":true,"stats":{"checkinsCount":4546,"usersCount":1730,"tipCount":58},"url":"http:\/\/www.chipotle.com","menu":{"type":"Menu","label":"Menu","anchor":"View Menu","url":"http:\/\/www.chipotle.com\/menu","mobileUrl":"http:\/\/www.chipotle.com\/menu","externalUrl":"http:\/\/www.chipotle.com\/menu"},"allowMenuUrlEdit":true,"beenHere":{"lastCheckinExpiredAt":0},"specials":{"count":0,"items":[]},"storeId":"1875","hereNow":{"count":0,"summary":"Nobody here","groups":[]},"referralId":"v-1510021943","venueChains":[{"id":"556e0f6fa7c82e6b724f8c82"}],"hasPerk":false},{"id":"4aa98159f964a520fb5320e3","name":"Whole Foods Market","contact":{"phone":"6046875288","formattedPhone":"(604) 687-5288","twitter":"wfmvan","facebook":"24922591487","facebookUsername":"WholeFoods","facebookName":"Whole Foods Market"},"location":{"address":"1675 Robson Street","crossStreet":"at Bidwell St.","lat":49.290069457579335,"lng":-123.13299851770314,"labeledLatLngs":[{"label":"display","lat":49.290069457579335,"lng":-123.13299851770314}],"postalCode":"V6G 1C8","cc":"CA","city":"Vancouver","state":"BC","country":"Canada","formattedAddress":["1675 Robson Street (at Bidwell St.)","Vancouver BC V6G 1C8"]},"categories":[{"id":"4bf58dd8d48988d118951735","name":"Grocery Store","pluralName":"Grocery Stores","shortName":"Grocery Store","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/shops\/food_grocery_","suffix":".png"},"primary":true}],"verified":true,"stats":{"checkinsCount":4998,"usersCount":1639,"tipCount":22},"url":"http:\/\/www.wholefoodsmarket.com\/stores\/robson","allowMenuUrlEdit":true,"beenHere":{"lastCheckinExpiredAt":0},"specials":{"count":0,"items":[]},"storeId":"RBS","hereNow":{"count":0,"summary":"Nobody here","groups":[]},"referralId":"v-1510021943","venueChains":[{"id":"556cdf5baceaff43eb042df6"}],"hasPerk":false},{"id":"51742960498e908f74206e41","name":"Five Guys","contact":{"phone":"6046851585","formattedPhone":"(604) 685-1585","twitter":"five_guys","facebook":"19836964440","facebookUsername":"fiveguys","facebookName":"Five Guys"},"location":{"address":"635 Robson Street","lat":49.280884641165215,"lng":-123.11916621892102,"labeledLatLngs":[{"label":"display","lat":49.280884641165215,"lng":-123.11916621892102}],"postalCode":"V6B 5J3","cc":"CA","city":"Vancouver","state":"BC","country":"Canada","formattedAddress":["635 Robson Street","Vancouver BC V6B 5J3"]},"categories":[{"id":"4bf58dd8d48988d16c941735","name":"Burger Joint","pluralName":"Burger Joints","shortName":"Burgers","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/burger_","suffix":".png"},"primary":true}],"verified":true,"stats":{"checkinsCount":2991,"usersCount":1715,"tipCount":39},"url":"http:\/\/fiveguys.com","menu":{"type":"Menu","label":"Menu","anchor":"View Menu","url":"http:\/\/www.fiveguys.com\/en\/menu","mobileUrl":"http:\/\/www.fiveguys.com\/en\/menu","externalUrl":"http:\/\/www.fiveguys.com\/en\/menu"},"allowMenuUrlEdit":true,"beenHere":{"lastCheckinExpiredAt":0},"specials":{"count":0,"items":[]},"storeId":"1594","hereNow":{"count":0,"summary":"Nobody here","groups":[]},"referralId":"v-1510021943","venueChains":[{"id":"556df7e1a7c82e6b724d8230"}],"hasPerk":false},{"id":"4aaa9a0ef964a5208d5620e3","name":"Cactus Club Cafe","contact":{"phone":"6046820933","formattedPhone":"(604) 682-0933","twitter":"cactusclubcafe","facebook":"68611420170","facebookUsername":"cactusclubcafe","facebookName":"Cactus Club Cafe"},"location":{"address":"588 Burrard St","crossStreet":"at Dunsmuir St","lat":49.285698787096095,"lng":-123.11924946282534,"labeledLatLngs":[{"label":"display","lat":49.285698787096095,"lng":-123.11924946282534}],"postalCode":"V6C 0A8","cc":"CA","city":"Vancouver","state":"BC","country":"Canada","formattedAddress":["588 Burrard St (at Dunsmuir St)","Vancouver BC V6C 0A8"]},"categories":[{"id":"4bf58dd8d48988d14e941735","name":"American Restaurant","pluralName":"American Restaurants","shortName":"American","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/default_","suffix":".png"},"primary":true}],"verified":true,"stats":{"checkinsCount":6592,"usersCount":4025,"tipCount":67},"url":"http:\/\/www.facebook.com\/cactusclubcafe","allowMenuUrlEdit":true,"beenHere":{"lastCheckinExpiredAt":0},"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"referralId":"v-1510021943","venueChains":[{"id":"5569eecda7c8896abe7bd355"}],"hasPerk":false},{"id":"4aa733eef964a520434c20e3","name":"The Old Spaghetti Factory","contact":{"phone":"6046841288","formattedPhone":"(604) 684-1288","twitter":"OSFCanada","facebook":"133713743312230","facebookUsername":"osfgastown","facebookName":"The Old Spaghetti Factory Gastown"},"location":{"address":"53 Water Street","crossStreet":"btwn Carrall & Abbott","lat":49.28371475037591,"lng":-123.1053402465035,"labeledLatLngs":[{"label":"display","lat":49.28371475037591,"lng":-123.1053402465035}],"postalCode":"V6B 1A1","cc":"CA","city":"Vancouver","state":"BC","country":"Canada","formattedAddress":["53 Water Street (btwn Carrall & Abbott)","Vancouver BC V6B 1A1"]},"categories":[{"id":"4bf58dd8d48988d110941735","name":"Italian Restaurant","pluralName":"Italian Restaurants","shortName":"Italian","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/italian_","suffix":".png"},"primary":true}],"verified":true,"stats":{"checkinsCount":5012,"usersCount":3512,"tipCount":72},"url":"http:\/\/www.facebook.com\/theoldspaghettifactory","menu":{"type":"Menu","label":"Menu","anchor":"View Menu","url":"http:\/\/www.oldspaghettifactory.ca\/media\/OSFGastown2014(4).pdf","mobileUrl":"http:\/\/www.oldspaghettifactory.ca\/media\/OSFGastown2014(4).pdf","externalUrl":"http:\/\/www.oldspaghettifactory.ca\/media\/OSFGastown2014(4).pdf"},"allowMenuUrlEdit":true,"beenHere":{"lastCheckinExpiredAt":0},"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"referralId":"v-1510021943","venueChains":[{"id":"5568f032a7c8a9cf8ec406b3"}],"hasPerk":false}],"confident":false,"geocode":{"what":"","where":"vancouver bc","feature":{"cc":"CA","name":"Vancouver","displayName":"Vancouver, BC, Canada","matchedName":"Vancouver, BC, Canada","highlightedName":"<b>Vancouver<\/b>, <b>BC<\/b>, Canada","woeType":7,"slug":"vancouver-british-columbia-canada","id":"geonameid:6173331","longId":"72057594044101267","geometry":{"center":{"lat":49.24966,"lng":-123.11934},"bounds":{"ne":{"lat":49.31439002686205,"lng":-123.02296611995233},"sw":{"lat":49.19840801038309,"lng":-123.22524087683938}}}},"parents":[]}}}';
		}
		$parsedJson = json_decode($srJson);
		$response = $parsedJson->response;
		$venues = $response->venues;
		#var_dump($venues);
		extractDataFromVenues($venues);
	}
	
	public function extractDataFromVenues($venues){
		foreach($venues as $v)
			{
				$name = $v->name;
				$location = $v->location;
				$categories = $v->categories;
				#$lat = $location->lat;
				#$lng = $location->lng;
				
				$apiID = $v->id;
				$streetAddress = $location->address;
				$city = $location->city;
				$prvCode = $location->state;
				$country = $location->country;
				$postalCode = "";
				if (!empty($location->postalCode)){
					$postalCode = ", " . $location->postalCode;
				}
				$address = "";
				$tags = "";
				
				$address .= $streetAddress . ", " . $city . ", " . $prvCode . $postalCode;
				
				
				foreach ($categories as $cat)
				{
					#Extract each tag name for this restaurant.
					$tags .= $cat->shortName;
				}
				
				
				
				#Here is the insert.
				#$this->db->insert('restaurants', )
			}
	}
}

class Restaurant{
	function __construct($apiId, $tags, $streetAddress, $city, $prvCode){
		
	}
}
